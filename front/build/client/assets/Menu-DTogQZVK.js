import{r as c,n as N}from"./chunk-LSOULM7L-io0bedPh.js";import{g as $,a as q,u as B,s as j,c as J,b as Q,t as X}from"./createSimplePaletteValueFilter-DAl8vQCF.js";import{u as Y,b as Z,o as ee,i as te,d as se,c as O}from"./Grow-B5R8EoXR.js";import{g as oe,o as re,b as ne,c as ie,a as ae}from"./Popover-CXTwBrBR.js";function T(t,e,o){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:o?null:t.firstChild}function A(t,e,o){return t===e?o?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:o?null:t.lastChild}function z(t,e){if(e===void 0)return!0;let o=t.innerText;return o===void 0&&(o=t.textContent),o=o.trim().toLowerCase(),o.length===0?!1:e.repeating?o[0]===e.keys[0]:o.startsWith(e.keys.join(""))}function E(t,e,o,P,d,S){let h=!1,u=d(t,e,e?o:!1);for(;u;){if(u===t.firstChild){if(h)return!1;h=!0}const p=P?!1:u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||!z(u,S)||p)u=d(t,u,o);else return u.focus(),!0}return!1}const le=c.forwardRef(function(e,o){const{actions:P,autoFocus:d=!1,autoFocusItem:S=!1,children:h,className:u,disabledItemsFocusable:p=!1,disableListWrap:y=!1,onKeyDown:g,variant:C="selectedMenu",...L}=e,f=c.useRef(null),k=c.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Y(()=>{d&&f.current.focus()},[d]),c.useImperativeHandle(P,()=>({adjustStyleForScrollbar:(s,{direction:i})=>{const r=!f.current.style.width;if(s.clientHeight<f.current.clientHeight&&r){const M=`${oe(re(s))}px`;f.current.style[i==="rtl"?"paddingLeft":"paddingRight"]=M,f.current.style.width=`calc(100% + ${M})`}return f.current}}),[]);const F=s=>{const i=f.current,r=s.key;if(s.ctrlKey||s.metaKey||s.altKey){g&&g(s);return}const w=ee(i).activeElement;if(r==="ArrowDown")s.preventDefault(),E(i,w,y,p,T);else if(r==="ArrowUp")s.preventDefault(),E(i,w,y,p,A);else if(r==="Home")s.preventDefault(),E(i,null,y,p,T);else if(r==="End")s.preventDefault(),E(i,null,y,p,A);else if(r.length===1){const a=k.current,I=r.toLowerCase(),K=performance.now();a.keys.length>0&&(K-a.lastTime>500?(a.keys=[],a.repeating=!0,a.previousKeyMatched=!0):a.repeating&&I!==a.keys[0]&&(a.repeating=!1)),a.lastTime=K,a.keys.push(I);const R=w&&!a.repeating&&z(w,a);a.previousKeyMatched&&(R||E(i,w,!1,p,T,a))?s.preventDefault():a.previousKeyMatched=!1}g&&g(s)},v=Z(f,o);let n=-1;c.Children.forEach(h,(s,i)=>{if(!c.isValidElement(s)){n===i&&(n+=1,n>=h.length&&(n=-1));return}s.props.disabled||(C==="selectedMenu"&&s.props.selected||n===-1)&&(n=i),n===i&&(s.props.disabled||s.props.muiSkipListHighlight||s.type.muiSkipListHighlight)&&(n+=1,n>=h.length&&(n=-1))});const b=c.Children.map(h,(s,i)=>{if(i===n){const r={};return S&&(r.autoFocus=!0),s.props.tabIndex===void 0&&C==="selectedMenu"&&(r.tabIndex=0),c.cloneElement(s,r)}return s});return N.jsx(ne,{role:"menu",ref:v,className:u,onKeyDown:F,tabIndex:d?0:-1,...L,children:b})});function ue(t){return $("MuiMenu",t)}q("MuiMenu",["root","paper","list"]);const ce={vertical:"top",horizontal:"right"},pe={vertical:"top",horizontal:"left"},fe=t=>{const{classes:e}=t;return Q({root:["root"],paper:["paper"],list:["list"]},ue,e)},de=j(ae,{shouldForwardProp:t=>X(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),me=j(ie,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),he=j(le,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),we=c.forwardRef(function(e,o){const P=B({props:e,name:"MuiMenu"}),{autoFocus:d=!0,children:S,className:h,disableAutoFocusItem:u=!1,MenuListProps:p={},onClose:y,open:g,PaperProps:C={},PopoverClasses:L,transitionDuration:f="auto",TransitionProps:{onEntering:k,...F}={},variant:v="selectedMenu",slots:n={},slotProps:b={},...s}=P,i=te(),r={...P,autoFocus:d,disableAutoFocusItem:u,MenuListProps:p,onEntering:k,PaperProps:C,transitionDuration:f,TransitionProps:F,variant:v},M=fe(r),w=d&&!u&&g,a=c.useRef(null),I=(l,m)=>{a.current&&a.current.adjustStyleForScrollbar(l,{direction:i?"rtl":"ltr"}),k&&k(l,m)},K=l=>{l.key==="Tab"&&(l.preventDefault(),y&&y(l,"tabKeyDown"))};let R=-1;c.Children.map(S,(l,m)=>{c.isValidElement(l)&&(l.props.disabled||(v==="selectedMenu"&&l.props.selected||R===-1)&&(R=m))});const D={slots:n,slotProps:{list:p,transition:F,paper:C,...b}},U=se({elementType:n.root,externalSlotProps:b.root,ownerState:r,className:[M.root,h]}),[W,G]=O("paper",{className:M.paper,elementType:me,externalForwardedProps:D,shouldForwardComponentProp:!0,ownerState:r}),[V,_]=O("list",{className:J(M.list,p.className),elementType:he,shouldForwardComponentProp:!0,externalForwardedProps:D,getSlotProps:l=>({...l,onKeyDown:m=>{var H;K(m),(H=l.onKeyDown)==null||H.call(l,m)}}),ownerState:r}),x=typeof D.slotProps.transition=="function"?D.slotProps.transition(r):D.slotProps.transition;return N.jsx(de,{onClose:y,anchorOrigin:{vertical:"bottom",horizontal:i?"right":"left"},transformOrigin:i?ce:pe,slots:{root:n.root,paper:W,backdrop:n.backdrop,...n.transition&&{transition:n.transition}},slotProps:{root:U,paper:G,backdrop:typeof b.backdrop=="function"?b.backdrop(r):b.backdrop,transition:{...x,onEntering:(...l)=>{var m;I(...l),(m=x==null?void 0:x.onEntering)==null||m.call(x,...l)}}},open:g,ref:o,transitionDuration:f,ownerState:r,...s,classes:L,children:N.jsx(V,{actions:a,autoFocus:d&&(R===-1||u),autoFocusItem:w,variant:v,..._,children:S})})});export{we as M};
