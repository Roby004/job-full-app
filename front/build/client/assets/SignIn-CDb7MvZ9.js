import{w as N}from"./with-props-CxWoRmkF.js";import{r as a,t as b,n as e,N as u}from"./chunk-LSOULM7L-io0bedPh.js";import{s as y}from"./signstyle-BMlnRtbK.js";import{T as I,F as S,I as k,O as C}from"./TextField-DfdVI9hp.js";import{F as P,I as F,V as M,a as E}from"./VisibilityOff-Le8C9MPk.js";import{I as O}from"./IconButton-I44uhMOa.js";import{F as T}from"./FormControlLabel-rxy6X7u9.js";import"./createSimplePaletteValueFilter-DAl8vQCF.js";import"./Grow-B5R8EoXR.js";import"./index-CNVCymyq.js";import"./createSvgIcon-DFgC7DwZ.js";import"./Popover-CXTwBrBR.js";import"./Menu-DTogQZVK.js";import"./isMuiElement-bxpgwgQD.js";import"./Typography-DJgOgQMi.js";import"./ButtonBase-Co8Bud7R.js";import"./isFocusVisible-B8k4qzLc.js";import"./CircularProgress-C4PrRAOF.js";const Z=N(function(){const[r,h]=a.useState(!1),[n,x]=a.useState(""),[l,f]=a.useState(""),i=b(),j=()=>h(s=>!s),v=s=>s.preventDefault(),w=s=>s.preventDefault(),g=async()=>{var s;try{const t=await fetch("http://localhost:5000/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:l})}),c=await t.json();if(!t.ok){alert(c.message||"Échec de la connexion");return}const d=c.access_token;localStorage.setItem("token",d);const p=await fetch("http://localhost:5000/me",{headers:{Authorization:`Bearer ${d}`}}),o=await p.json();if(p.ok&&((s=o==null?void 0:o.data)!=null&&s.role)){const m=o.data.role;m==="recruteur"?i("/recruteur/dashboard"):m==="candidat"?i("/employe/accueil"):alert("Rôle inconnu!")}else alert("Impossible de récupérer les informations utilisateur.")}catch(t){console.error("Erreur lors de la connexion :",t),alert("Erreur technique lors de la connexion.")}};return e.jsxs("div",{className:"flex flex-row",children:[e.jsx("div",{className:"login px-4 py-2",children:e.jsx("img",{src:y,alt:"login",className:"h-auto",width:"790px",height:"200px"})}),e.jsxs("div",{className:"layout flex flex-col items-center justify-center pt-16 pb-4 px-20",children:[e.jsxs("div",{className:"w-100 items-center justify-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-center",children:"Content de vous revoir !"}),e.jsx("p",{className:"label-simple",children:"Veuillez saisir vos informations pour accéder à votre compte Key Predict."})]}),e.jsxs("div",{className:"input-forms",children:[e.jsx(I,{required:!0,label:"Email",className:"inpute w-full py-4 px-2",value:n,onChange:s=>x(s.target.value),sx:{mt:4}}),e.jsxs(P,{className:"inpute w-full mt-4",children:[e.jsxs(S,{sx:{m:0},variant:"outlined",className:"w-full pb-4",children:[e.jsx(k,{htmlFor:"outlined-adornment-password",children:"Mot de passe"}),e.jsx(C,{id:"outlined-adornment-password",type:r?"text":"password",value:l,onChange:s=>f(s.target.value),endAdornment:e.jsx(F,{position:"end",children:e.jsx(O,{onClick:j,onMouseDown:v,onMouseUp:w,edge:"end",children:r?e.jsx(M,{}):e.jsx(E,{})})}),label:"Mot de passe"})]}),e.jsxs("div",{className:"souvenir",children:[e.jsx(T,{control:e.jsx("input",{type:"checkbox"}),label:"Se souvenir de moi",labelPlacement:"end",className:"label pl-2",sx:{gap:"8px",marginLeft:"4px",alignItems:"center"}}),e.jsx(u,{to:"/auth/forgotmdp",className:"label",children:e.jsx("p",{className:"link",style:{color:"purple",fontWeight:"600"},children:"Mot de passe oublié ?"})})]})]})]}),e.jsxs("div",{className:"foot",style:{marginTop:"10%",order:"5",marginBottom:10},children:[e.jsx("button",{className:"btn-valider",onClick:g,children:"Se connecter"}),e.jsxs("div",{className:"inscription",children:[e.jsx("p",{children:"Besoin d'un compte Key predict ?"}),e.jsx(u,{to:"/auth/signup",className:"label",children:e.jsx("p",{className:"link",style:{color:"purple",fontWeight:600},children:"Inscrivez-vous"})})]})]})]})]})});export{Z as default};
