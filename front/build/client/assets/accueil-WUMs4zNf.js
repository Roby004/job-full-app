import{w as k}from"./with-props-CxWoRmkF.js";import{r,n as e,q as E}from"./chunk-LSOULM7L-io0bedPh.js";import{b as B}from"./bg3-Dtz_PR9_.js";import{N as M}from"./navbar-cli-BMROsp9C.js";import"./logo-icon-Dn9yHUnH.js";import"./Stack-CwC3NhOB.js";import"./createSimplePaletteValueFilter-DAl8vQCF.js";import"./createSvgIcon-DFgC7DwZ.js";import"./Grow-B5R8EoXR.js";import"./index-CNVCymyq.js";import"./isFocusVisible-B8k4qzLc.js";import"./useThemeProps-Dqe1E7Kd.js";import"./Typography-DJgOgQMi.js";import"./Menu-DTogQZVK.js";import"./Popover-CXTwBrBR.js";import"./MenuItem-5ZCoUKUi.js";import"./ButtonBase-Co8Bud7R.js";import"./listItemTextClasses-BJ0TsLHn.js";const Q=k(function(){const[i,g]=r.useState([]),[l,b]=r.useState(""),[c,j]=r.useState(""),[o,f]=r.useState(""),[d,y]=r.useState(""),[m,N]=r.useState([]),[x,v]=r.useState("recent");r.useEffect(()=>{(async()=>{try{const a=await(await fetch("http://localhost:5000/offer/open")).json();if(a.status==="success"){console.log("Data fetched successfully:",a);const p=a.offers.map(n=>{var h;return{id:n.id,title:n.title,description:w(n.description),company:((h=n.company)==null?void 0:h.name)||"Entreprise inconnue",category:n.category,location:n.location,postedAt:new Date(n.posted_at).toLocaleDateString(),budget:C(n.description),experience:"Intermediaire"}});g(p)}}catch(s){console.error("Erreur lors du chargement des offres:",s)}})(),console.log("Filtered jobs retrieved:",i)},[i]);const w=t=>t.split("**Missions")[0].trim().replace(/\*\*/g,""),C=t=>{const a=(t.split("**Rémunération**")[1]||"").match(/(\d[\d\s]*)\s*(\$|dollars)?/i);if(a){const p=a[1].replace(/\s/g,"");return parseInt(p,10)}return 0},S=t=>{N(s=>s.includes(t)?s.filter(a=>a!==t):[...s,t])},u=r.useMemo(()=>{let t=[...i];return console.log("Jobs state updated:",i),l&&(t=t.filter(s=>s.category===l)),c&&(t=t.filter(s=>s.location===c)),o&&(t=t.filter(s=>s.budget>=Number(o))),d&&(t=t.filter(s=>s.budget<=Number(d))),m.length&&(t=t.filter(s=>m.includes(s.experience))),x==="budgetAsc"&&t.sort((s,a)=>s.budget-a.budget),x==="budgetDesc"&&t.sort((s,a)=>a.budget-s.budget),t},[l,c,o,d,m,x]);return e.jsxs("main",{className:"flex flex-col items-center pt-2 pb-4 bg-gray-100 font-sans",children:[e.jsx(M,{}),e.jsx("div",{className:" bg-cover bg-center  py-10 px-6 rounded-md mb-6 mt-6",style:{backgroundImage:`url(${B})`,minHeight:"200px",width:"90%"},children:e.jsxs("div",{className:"max-w-7xl mx-auto text-center ",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold mb-2 drop-shadow-lg text-white",children:["Bienvenue sur ",e.jsx("span",{className:"text-yellow-300",children:"E-tady"})]}),e.jsx("p",{className:"text-lg md:text-xl text-gray-100 text-black drop-shadow-lg",children:"Connecter les talents et les opportunités en un seul clic."})]})}),e.jsxs("div",{className:"flex w-full px-8 py-6 gap-6 max-w-7xl",children:[e.jsxs("aside",{className:"w-1/4 bg-white rounded-md shadow-md p-5",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Filtres"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Catégorie"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:l,onChange:t=>b(t.target.value),children:[e.jsx("option",{value:"",children:"Toutes"}),e.jsx("option",{children:"Développement Web"}),e.jsx("option",{children:"Design"}),e.jsx("option",{children:"Marketing"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Localisation"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:c,onChange:t=>j(t.target.value),children:[e.jsx("option",{value:"",children:"Toutes"}),e.jsx("option",{children:"Freelance"}),e.jsx("option",{children:"Sur site"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Budget (€)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"Min",className:"w-1/2 border rounded px-2 py-1",value:o,onChange:t=>f(t.target.value)}),e.jsx("input",{type:"number",placeholder:"Max",className:"w-1/2 border rounded px-2 py-1",value:d,onChange:t=>y(t.target.value)})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Niveau d'expérience"}),e.jsx("div",{className:"space-y-1 text-sm",children:["Débutant","Intermédiaire","Expert"].map(t=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:m.includes(t),onChange:()=>S(t)}),t]},t))})]})]}),e.jsxs("section",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Offres d'emploi"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm mr-2",children:"Trier par:"}),e.jsxs("select",{className:"border rounded px-2 py-1 text-sm",value:x,onChange:t=>v(t.target.value),children:[e.jsx("option",{value:"recent",children:"Plus récent"}),e.jsx("option",{value:"budgetAsc",children:"Budget croissant"}),e.jsx("option",{value:"budgetDesc",children:"Budget décroissant"})]})]})]}),u.length>0?u.map(t=>e.jsx("div",{className:"bg-white p-5 mb-4 rounded-md shadow hover:shadow-md transition",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description}),e.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:[e.jsx("strong",{children:"Entreprise:"})," ",t.company," | ",e.jsx("strong",{children:"Budget:"})," $",t.budget," |"," ",e.jsx("strong",{children:"Expérience:"})," Intermédiaire"]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Posté le ",t.postedAt]})]}),e.jsx(E,{to:`employe/jobDetail/${t.id}`,className:"mt-1 px-4 py-2 text-sm text-white rounded hover:bg-yellow-700",style:{backgroundColor:"#0a8051"},children:"Voir détail"})]})},t.id)):e.jsx("p",{className:"text-gray-500",children:"Aucune offre ne correspond aux filtres sélectionnés."})]})]})]})});export{Q as default};
