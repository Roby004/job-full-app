import{w as N}from"./with-props-CxWoRmkF.js";import{r as a,t as b,n as e,N as u}from"./chunk-LSOULM7L-io0bedPh.js";import{s as y}from"./signstyle-DeWqp0up.js";import{T as I,F as S,I as k,O as C}from"./TextField-Bo1Kcyhs.js";import{F as P,I as F,V as M,a as E}from"./VisibilityOff-C9ooRaCa.js";import{I as O}from"./IconButton-CDJmrjB7.js";import{F as T}from"./FormControlLabel-DmP69yjm.js";import"./DefaultPropsProvider-D3XoZZZR.js";import"./Grow-3Z0qnTTb.js";import"./index-CNVCymyq.js";import"./useTheme-BGXANyoT.js";import"./createSimplePaletteValueFilter-Ci2NaAvL.js";import"./Popover-ehDyiyj2.js";import"./Menu-CfqzC8Vj.js";import"./createSvgIcon-Czy4a_wd.js";import"./isMuiElement-bxpgwgQD.js";import"./Typography-Dl5m69Yi.js";import"./ButtonBase-AlovMshM.js";import"./isFocusVisible-B8k4qzLc.js";import"./CircularProgress-jWFtDqlA.js";const se=N(function(){const[r,h]=a.useState(!1),[n,x]=a.useState(""),[l,f]=a.useState(""),i=b(),j=()=>h(s=>!s),g=s=>s.preventDefault(),v=s=>s.preventDefault(),w=async()=>{var s;try{const o=await fetch("http://localhost:5000/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:l})}),c=await o.json();if(!o.ok){alert(c.message||"Échec de la connexion");return}const d=c.access_token;localStorage.setItem("token",d);const m=await fetch("http://localhost:5000/me",{headers:{Authorization:`Bearer ${d}`}}),t=await m.json();if(console.log("User data:",t),m.ok&&((s=t==null?void 0:t.data)!=null&&s.role)){const p=t.data.role;p==="recruteur"?i("/recruteur/dashboard"):p==="candidat"?i("/employe/accueil"):alert("Rôle inconnu!")}else alert("Impossible de récupérer les informations utilisateur.")}catch(o){console.error("Erreur lors de la connexion :",o),alert("Erreur technique lors de la connexion.")}};return e.jsxs("div",{className:"flex flex-row",children:[e.jsx("div",{className:"login px-4 py-2",children:e.jsx("img",{src:y,alt:"login",className:"h-auto",width:"790px",height:"200px"})}),e.jsxs("div",{className:"layout flex flex-col items-center justify-center pt-16 pb-4 px-20",children:[e.jsxs("div",{className:"w-100 items-center justify-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-center",children:"Content de vous revoir !"}),e.jsx("p",{className:"label-simple",children:"Veuillez saisir vos informations pour accéder à votre compte e-tady."})]}),e.jsxs("div",{className:"input-forms",children:[e.jsx(I,{required:!0,label:"Email",className:"inpute w-full py-4 px-2",value:n,onChange:s=>x(s.target.value),sx:{mt:4}}),e.jsxs(P,{className:"inpute w-full mt-4",children:[e.jsxs(S,{sx:{m:0},variant:"outlined",className:"w-full pb-4",children:[e.jsx(k,{htmlFor:"outlined-adornment-password",children:"Mot de passe"}),e.jsx(C,{id:"outlined-adornment-password",type:r?"text":"password",value:l,onChange:s=>f(s.target.value),endAdornment:e.jsx(F,{position:"end",children:e.jsx(O,{onClick:j,onMouseDown:g,onMouseUp:v,edge:"end",children:r?e.jsx(M,{}):e.jsx(E,{})})}),label:"Mot de passe"})]}),e.jsxs("div",{className:"souvenir",children:[e.jsx(T,{control:e.jsx("input",{type:"checkbox"}),label:"Se souvenir de moi",labelPlacement:"end",className:"label pl-2",sx:{gap:"8px",marginLeft:"4px",alignItems:"center"}}),e.jsx(u,{to:"/auth/forgotmdp",className:"label",children:e.jsx("p",{className:"link",style:{color:"#023047",fontWeight:"600"},children:"Mot de passe oublié ?"})})]})]})]}),e.jsxs("div",{className:"foot",style:{marginTop:"10%",order:"5",marginBottom:10},children:[e.jsx("button",{className:"btn-valider",onClick:w,children:"Se connecter"}),e.jsxs("div",{className:"inscription",children:[e.jsx("p",{children:"Besoin d'un compte Key predict ?"}),e.jsx(u,{to:"/auth/signup",className:"label",children:e.jsx("p",{className:"link",style:{color:"#023047",fontWeight:600},children:"Inscrivez-vous"})})]})]})]})]})});export{se as default};
