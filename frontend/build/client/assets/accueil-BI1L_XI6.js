import{w as k}from"./with-props-CxWoRmkF.js";import{r as n,n as e,q as B}from"./chunk-LSOULM7L-io0bedPh.js";import{b as M}from"./bg3-Dtz_PR9_.js";import{N as A}from"./navbar-cli-CwZoKeuF.js";import{a as D}from"./index-xsH4HHeE.js";import"./logo-icon2-3sguuZSz.js";import"./Stack-DJ672RKg.js";import"./DefaultPropsProvider-D3XoZZZR.js";import"./createSvgIcon-Czy4a_wd.js";import"./Grow-3Z0qnTTb.js";import"./index-CNVCymyq.js";import"./useTheme-BGXANyoT.js";import"./createSimplePaletteValueFilter-Ci2NaAvL.js";import"./isFocusVisible-B8k4qzLc.js";import"./useThemeProps-4GIH6D68.js";import"./Typography-Dl5m69Yi.js";import"./Menu-CfqzC8Vj.js";import"./Popover-ehDyiyj2.js";import"./MenuItem-DE46lkXZ.js";import"./ButtonBase-AlovMshM.js";import"./listItemTextClasses-CxOMZ5Ha.js";const ee=k(function(){const[i,g]=n.useState([]),[l,b]=n.useState(""),[o,f]=n.useState(""),[c,j]=n.useState(""),[d,y]=n.useState(""),[m,N]=n.useState([]),[x,v]=n.useState("recent"),[w,u]=n.useState(!0);n.useEffect(()=>{(async()=>{try{const s=await D.get("http://localhost:5000/offer/open");if(s.data.status==="success"){const a=s.data.offers.map(r=>{var h;return{id:r.id,title:r.title,description:C(r.description),company:((h=r.company)==null?void 0:h.name)||"Entreprise inconnue",category:r.category,location:r.location,postedAt:new Date(r.posted_at).toLocaleDateString(),budget:E(r.description),experience:"Intermediaire"}});console.log("Data fetched successfully:",a),g(a),u(!0)}}catch(s){console.error("Erreur lors du chargement des offres:",s)}finally{u(!1)}})()},[]),n.useEffect(()=>{console.log("Jobs state updated:",i)},[i]);const C=t=>t.split("**Missions")[0].trim().replace(/\*\*/g,""),E=t=>{const a=(t.split("**Rémunération**")[1]||"").match(/(\d[\d\s]*)\s*(\$|dollars)?/i);if(a){const r=a[1].replace(/\s/g,"");return parseInt(r,10)}return 0},S=t=>{N(s=>s.includes(t)?s.filter(a=>a!==t):[...s,t])},p=n.useMemo(()=>{if(!l&&!o&&!c&&!d&&m.length===0&&!x)return console.log("Aucun filtre appliqué, tous les jobs sont affichés."),i;let s=[...i];return console.log("Jobs data state updated:",s),l&&(s=s.filter(a=>a.category===l)),o&&(s=s.filter(a=>a.location===o)),c&&(s=s.filter(a=>a.budget>=Number(c))),d&&(s=s.filter(a=>a.budget<=Number(d))),m.length&&(s=s.filter(a=>m.includes(a.experience))),x==="budgetAsc"&&s.sort((a,r)=>a.budget-r.budget),x==="budgetDesc"&&s.sort((a,r)=>r.budget-a.budget),s},[i,l,o,c,d,m,x]);return e.jsxs("main",{className:"flex flex-col items-center pt-2 pb-4 bg-gray-100 font-sans",children:[e.jsx(A,{}),e.jsx("div",{className:" bg-cover bg-center  py-10 px-6 rounded-md mb-6 mt-6",style:{backgroundImage:`url(${M})`,minHeight:"200px",width:"90%"},children:e.jsxs("div",{className:"max-w-7xl mx-auto text-center ",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold mb-2 drop-shadow-lg text-white",children:["Bienvenue sur ",e.jsx("span",{className:"text-yellow-300",children:"E-tady"})]}),e.jsx("p",{className:"text-lg md:text-xl text-gray-100 text-black drop-shadow-lg",children:"Connecter les talents et les opportunités en un seul clic."})]})}),e.jsxs("div",{className:"flex w-full px-8 py-6 gap-6 max-w-7xl",children:[e.jsxs("aside",{className:"w-1/4 bg-white rounded-md shadow-md p-5",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Filtres"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Catégorie"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:l,onChange:t=>b(t.target.value),children:[e.jsx("option",{value:"",children:"Toutes"}),e.jsx("option",{children:"Développement Web"}),e.jsx("option",{children:"Design"}),e.jsx("option",{children:"Marketing"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Localisation"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:o,onChange:t=>f(t.target.value),children:[e.jsx("option",{value:"",children:"Toutes"}),e.jsx("option",{children:"Freelance"}),e.jsx("option",{children:"Sur site"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Budget (€)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"Min",className:"w-1/2 border rounded px-2 py-1",value:c,onChange:t=>j(t.target.value)}),e.jsx("input",{type:"number",placeholder:"Max",className:"w-1/2 border rounded px-2 py-1",value:d,onChange:t=>y(t.target.value)})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Niveau d'expérience"}),e.jsx("div",{className:"space-y-1 text-sm",children:["Débutant","Intermédiaire","Expert"].map(t=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:m.includes(t),onChange:()=>S(t)}),t]},t))})]})]}),e.jsxs("section",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Offres d'emploi disponibles"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm mr-2",children:"Trier par:"}),e.jsxs("select",{className:"border rounded px-2 py-1 text-sm",value:x,onChange:t=>v(t.target.value),children:[e.jsx("option",{value:"recent",children:"Plus récent"}),e.jsx("option",{value:"budgetAsc",children:"Budget croissant"}),e.jsx("option",{value:"budgetDesc",children:"Budget décroissant"})]})]})]}),w?e.jsx("p",{children:"Chargement des offres..."}):p.length>0?p.map(t=>e.jsx("div",{className:"bg-white p-5 mb-4 rounded-md shadow hover:shadow-md transition",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"sm:w-full w-2/3 mr-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description}),e.jsxs("div",{className:"text-sm text-gray-500 mt-2 ",children:[e.jsx("strong",{children:"Entreprise:"})," ",t.company," | ",e.jsx("strong",{children:"Budget:"})," $",t.budget," |"," ",e.jsx("strong",{children:"Expérience:"})," Intermédiaire"]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Posté le ",t.postedAt]})]}),e.jsx(B,{to:`jobDetail/${t.id}`,className:"mt-1 px-3 py-2 text-sm text-white rounded hover:bg-yellow-700 w-[20%] flex justify-center",style:{backgroundColor:"#0a8051",alignItems:"center",background:"linear-gradient(264.79deg, #023047 47.52%, #206EBB 126.2%)",borderRadius:"40px"},children:e.jsx("p",{children:"+ Voir détail"})})]})},t.id)):e.jsx("p",{className:"text-gray-500",children:"Aucunes offre ne correspond aux filtres sélectionnés."})]})]})]})});export{ee as default};
