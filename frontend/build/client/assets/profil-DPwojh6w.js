import{w as F}from"./with-props-CxWoRmkF.js";import{n as e,r as i}from"./chunk-LSOULM7L-io0bedPh.js";import{a as w}from"./index-xsH4HHeE.js";import{N as T}from"./navbar-cli-CwZoKeuF.js";import{c as _}from"./createSvgIcon-Czy4a_wd.js";import"./logo-icon2-3sguuZSz.js";import"./Stack-DJ672RKg.js";import"./DefaultPropsProvider-D3XoZZZR.js";import"./Grow-3Z0qnTTb.js";import"./index-CNVCymyq.js";import"./useTheme-BGXANyoT.js";import"./createSimplePaletteValueFilter-Ci2NaAvL.js";import"./isFocusVisible-B8k4qzLc.js";import"./useThemeProps-4GIH6D68.js";import"./Typography-Dl5m69Yi.js";import"./Menu-CfqzC8Vj.js";import"./Popover-ehDyiyj2.js";import"./MenuItem-DE46lkXZ.js";import"./ButtonBase-AlovMshM.js";import"./listItemTextClasses-CxOMZ5Ha.js";const U=_([e.jsx("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"},"0"),e.jsx("path",{d:"M14 17H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"},"1")]),V=_(e.jsx("path",{d:"M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7m2.85 11.1-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1"})),H=({resumeFile:m,skills:n,newSkill:h,setNewSkill:b,addSkill:c,removeSkill:p,availableSkills:u,experiences:j,removeExperience:a,newExp:o,handleChange:s,handleSubmit:k})=>{const[f,N]=i.useState(null),v=async t=>{var y;const r=(y=t.target.files)==null?void 0:y[0];if(!r)return;N(r);const C=new FormData;C.append("cv",r);try{const S=await w.post("http://localhost:5000/upload_cv",C,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("Upload success:",S.data)}catch(S){console.error("Upload error:",S)}};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"mt-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Upload Resume/CV"}),e.jsx("input",{type:"file",accept:".pdf,.doc,.docx",onChange:v,className:"block w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),f&&e.jsxs("p",{className:"mt-2 text-sm text-green-700",children:["Uploaded: ",f.name]})]}),e.jsxs("section",{className:"mt-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:n.map((t,r)=>e.jsxs("div",{className:"flex items-center bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm font-medium",children:[t,e.jsx("button",{onClick:()=>p(r),className:"ml-2 text-red-500 hover:text-red-700",children:"×"})]},r))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:h,onChange:t=>b(t.target.value),className:"border px-3 py-2 rounded-md w-full",children:[e.jsx("option",{value:"",children:"-- Select a skill --"}),u.filter(t=>!n.includes(t.name)).map((t,r)=>e.jsx("option",{value:t.name,children:t.name},r))]}),e.jsx("button",{onClick:c,disabled:n.length>=8,className:`px-4 py-2 rounded ${n.length>=8?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:"Ajouter"})]}),n.length>=8&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:"8 skills au maximum."})]}),e.jsxs("section",{className:"mt-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Experience"}),e.jsx("ul",{className:"space-y-2 mb-4",children:j.map((t,r)=>e.jsxs("li",{className:"p-4 border rounded-md bg-white shadow-sm relative",children:[e.jsx("button",{onClick:()=>a(r),className:"absolute top-2 right-2 text-red-500 hover:text-red-700 text-xl",children:"×"}),e.jsx("p",{className:"font-semibold",children:t.title}),e.jsx("p",{className:"text-gray-600",children:t.entreprise}),e.jsxs("p",{className:"text-sm text-gray-500",children:[new Date(t.deb_date).toLocaleDateString()," - ",t.fin_date?new Date(t.fin_date).toLocaleDateString():"Présent"]})]},r))}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 mb-2",children:[e.jsx("input",{name:"title",value:o.title,onChange:s,placeholder:"Titre poste",className:"border px-3 py-2 rounded-md"}),e.jsx("input",{name:"entreprise",value:o.entreprise,onChange:s,placeholder:"Entreprise",className:"border px-3 py-2 rounded-md"}),e.jsx("input",{name:"debdate",value:o.debdate,type:"date",onChange:s,className:"border px-3 py-2 rounded-md"}),e.jsx("input",{name:"findate",value:o.findate,type:"date",onChange:s,className:"border px-3 py-2 rounded-md"}),e.jsx("input",{name:"description",value:o.description,onChange:s,placeholder:"Description",className:"border px-3 py-2 rounded-md"})]}),e.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",children:"Ajouter"})]})]})]})},R=({candidatures:m})=>e.jsxs("section",{className:"mt-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Mes candidatures"}),m.length===0?e.jsx("p",{className:"text-gray-600",children:"Aucune candidature pour le moment."}):e.jsx("ul",{className:"space-y-2",children:m.map((n,h)=>e.jsxs("li",{className:"p-4 border rounded-md bg-white shadow-sm",children:[e.jsx("p",{className:"font-medium",children:n.titre||"Titre inconnu"}),e.jsx("p",{className:"text-gray-500 text-sm",children:n.statut||"Statut inconnu"})]},h))})]}),L=({open:m,onClose:n,onSubmit:h})=>{const[b,c]=i.useState({mode_travail:"",type_offre:"",min_salaire:"",categories:[],skills:[]}),p=a=>{c({...b,[a.target.name]:a.target.value})},u=a=>{c(o=>({...o,skills:o.skills.includes(a)?o.skills.filter(s=>s!==a):[...o.skills,a]}))},j=()=>{h(b),n()};return m?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-md w-full max-w-lg",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Vos préférences d'emploi"}),e.jsx("label",{children:"Mode de travail :"}),e.jsxs("select",{name:"mode_travail",onChange:p,className:"w-full mb-3",children:[e.jsx("option",{value:"",children:"Peu importe"}),e.jsx("option",{value:"télétravail",children:"Télétravail"}),e.jsx("option",{value:"présentiel",children:"Présentiel"})]}),e.jsx("label",{children:"Type d'offre :"}),e.jsxs("select",{name:"type_offre",onChange:p,className:"w-full mb-3",children:[e.jsx("option",{value:"",children:"Peu importe"}),e.jsx("option",{value:"CDI",children:"CDI"}),e.jsx("option",{value:"CDD",children:"CDD"}),e.jsx("option",{value:"Freelance",children:"Freelance"})]}),e.jsx("label",{children:"Salaire minimum souhaité (€) :"}),e.jsx("input",{type:"number",name:"min_salaire",onChange:p,className:"w-full mb-3"}),e.jsx("label",{children:"Compétences préférées :"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:["Python","Développement web","React","Communication"].map(a=>e.jsx("button",{type:"button",className:`px-3 py-1 rounded-full border ${b.skills.includes(a)?"bg-blue-200":""}`,onClick:()=>u(a),children:a},a))}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:n,children:"Annuler"}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",onClick:j,children:"Appliquer"})]})]})}):null},G=()=>{var A,I;const[m,n]=i.useState("infos"),[h,b]=i.useState(null),[c,p]=i.useState([]),[u,j]=i.useState(""),[a,o]=i.useState([]),[s,k]=i.useState(null),[f,N]=i.useState([]),[v,t]=i.useState({title:"",entreprise:"",debdate:"",findate:"",description:""}),r={suggestedCompanies:["OpenAI","Meta","Google","Spotify","Netflix"]},[C,y]=i.useState(!1),S=()=>y(!0),z=()=>y(!1),[J,q]=i.useState(null),O=l=>{localStorage.setItem("candidatePreferences",JSON.stringify(l));const x=JSON.parse(localStorage.getItem("candidatePreferences"));console.log("Préférences sauvegardées :",x)};i.useEffect(()=>{const l=async()=>{var P,D,M;const d=(await w.get("http://localhost:5000/me",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.data;k(d),N(((P=d==null?void 0:d.candidat)==null?void 0:P.experiences)||[]),console.log("skills",(D=d==null?void 0:d.candidat)==null?void 0:D.skills),p((M=d==null?void 0:d.candidat)==null?void 0:M.skills.map(E=>E.name))},x=async()=>{const g=await w.get("http://localhost:5000/skills",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});o(g.data||[])};l(),x()},[]),console.log("User Data:",c);const $=l=>t({...v,[l.target.name]:l.target.value}),B=async l=>{l.preventDefault();const x=await w.post("http://localhost:5000/experience",v,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});x.data.status==="success"&&(N([...f,x.data.data]),t({title:"",entreprise:"",debdate:"",findate:"",description:""}))};return e.jsxs("div",{className:"min-h-screen bg-gray-100 px-8 py-6 pt-2",children:[e.jsx(T,{}),e.jsxs("div",{className:"max-w-4xl mx-auto p-6 mt-6 font-sans text-gray-800 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("img",{src:"https://via.placeholder.com/150",className:"w-32 h-32 rounded-full border shadow-sm"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:(s==null?void 0:s.candidat.fullname)||"Loading..."}),e.jsx("p",{className:"mt-2 text-gray-600",children:((A=s==null?void 0:s.candidat)==null?void 0:A.bio)||"Bio non disponible"})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6 border-b border-[#dadada] pb-0",children:[e.jsxs("button",{className:`${m==="infos"?"border-b-3 border-[#BAA3EC]  text-[#023047]":""} pb-2 flex`,onClick:()=>n("infos"),children:[e.jsx(V,{className:"ml-1 "}),"Informations générales"]}),e.jsxs("button",{className:`${m==="candidatures"?"border-b-3 border-[#BAA3EC]  text-[#023047]":""} pb-2 flex `,onClick:()=>n("candidatures"),children:[e.jsx(U,{className:"ml-1",fontSize:"small"}),"Mes candidatures"]})]}),m==="infos"?e.jsx(H,{resumeFile:h,skills:c,newSkill:u,setNewSkill:j,addSkill:()=>{u&&!c.includes(u)&&p([...c,u])},removeSkill:l=>p(c.filter((x,g)=>g!==l)),availableSkills:a,experiences:f,removeExperience:l=>N(f.filter((x,g)=>g!==l)),newExp:v,handleChange:$,handleSubmit:B}):e.jsx(R,{candidatures:((I=s==null?void 0:s.candidat)==null?void 0:I.candidatures)||[]}),e.jsxs("section",{className:"mt-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Suggested Companies"}),e.jsx("button",{onClick:S,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Préférences de matching"}),e.jsx(L,{open:C,onClose:z,onSubmit:O}),e.jsx("ul",{className:"grid grid-cols-2 gap-3",children:r.suggestedCompanies.map(l=>e.jsx("li",{className:"p-3 bg-gray-100 rounded-md text-center font-medium text-gray-700",children:l},l))})]})]})]})},xe=F(G);export{xe as default};
